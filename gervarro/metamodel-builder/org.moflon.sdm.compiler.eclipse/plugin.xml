<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
   <!--
   <extension
         point="org.eclipse.emf.ecore.generated_package">
      <package
            class="org.gervarro.emoflon.EMoflonPackage"
            genModel="model/OrigMoflon.genmodel"
            uri="platform:/plugin/org.moflon.sdm.democles.patternmatcher/model/Moflon.ecore">
      </package>
   </extension>
   <extension
         point="org.eclipse.ui.commands">
      <command
            categoryId="org.eclipse.emf.codegen.ecore.ui.Commands"
            id="org.moflon.codegen.eclipse.ui.GenerateCode"
            name="GenerateCode">
      </command>
   </extension>
   <extension
         point="org.eclipse.ui.handlers">
      <handler
            class="org.moflon.codegen.eclipse.ui.Generate"
            commandId="org.moflon.codegen.eclipse.ui.GenerateCode">
      </handler>
   </extension>
   <extension
         point="org.eclipse.ui.menus">
      <menuContribution
            allPopups="false"
            locationURI="menu:org.eclipse.ui.main.menu?after=additions">
         <menu
               id="org.moflon.eclipse.ui.MoflonMenu"
               label="Democles">
            <command
                  commandId="org.moflon.codegen.eclipse.ui.GenerateCode"
                  label="Generate Code"
                  style="push">
            </command>
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="activeEditor">
                  <instanceof
                        value="org.eclipse.emf.ecore.presentation.EcoreEditor">
                  </instanceof>
               </with>
            </visibleWhen>
         </menu>
      </menuContribution>
      <menuContribution
            allPopups="false"
            locationURI="popup:org.eclipse.ui.popup.any?after=additions">
         <menu
               label="Democles">
            <visibleWhen
                  checkEnabled="false">
               <with
                     variable="selection">
                  <iterate>
                     <adapt
                           type="org.eclipse.core.resources.IResource">
                        <test
                              property="org.eclipse.core.resources.projectNature"
                              value="org.moflon.ide.ui.runtime.natures.RepositoryNature">
                        </test>
                     </adapt>
                  </iterate>
               </with>
            </visibleWhen>
            <command
                  commandId="org.moflon.codegen.eclipse.ui.GenerateCode"
                  label="Generate Moflon Code"
                  style="push">
               <visibleWhen
                     checkEnabled="false">
                  <with
                        variable="selection">
                     <iterate
                           ifEmpty="false">
                        <adapt
                              type="org.eclipse.core.resources.IFile">
                           <test
                                 property="org.eclipse.core.resources.contentTypeId"
                                 value="org.eclipse.emf.ecore">
                           </test>
                        </adapt>
                     </iterate>
                  </with>
               </visibleWhen>
            </command>
         </menu>
      </menuContribution>
   </extension>
   -->
   <extension
         point="org.eclipse.emf.ecore.factory_override">
      <factory
            class="org.moflon.eclipse.genmodel.MoflonGenModelFactory"
            uri="http://www.eclipse.org/emf/2002/GenModel">
      </factory>
   </extension>
   <extension
         point="org.eclipse.core.runtime.adapters">
      <factory
            adaptableType="org.eclipse.core.resources.IProject"
            class="org.moflon.moca.inject.validation.InjectionErrorReporterFactory">
         <adapter
               type="org.moflon.moca.inject.validation.InjectionErrorReporter">
         </adapter>
      </factory>
   </extension>
   <!--
   <extension
         point="org.eclipse.emf.ecore.extension_parser">
      <parser
            class="org.gervarro.democles.emoflon.resource.SDMEnhancedEcoreResourceFactory"
            type="ecore">
      </parser>
   </extension>
   -->
</plugin>
