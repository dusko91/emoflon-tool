<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.0"?>

<plugin>

  <extension point="org.eclipse.emf.ecore.generated_package">
    <package 
       uri = "http://www.moflon.org/ide/tgg/mosl/TGG" 
       class = "org.moflon.tgg.mosl.tgg.TggPackage"
       genModel = "model/generated/TGG.genmodel" /> 
	
  </extension>
  <extension
        id="mosltggbuilder"
        name="MOSL TGG Builder"
        point="org.eclipse.core.resources.builders">
     <builder
           hasNature="true">
        <run
              class="org.moflon.tgg.mosl.builder.MoslTGGBuilder">
        </run>
     </builder>
  </extension>
  <extension
        id="moslTGGNature"
        name="MOSL TGG Nature"
        point="org.eclipse.core.resources.natures">
     <runtime>
        <run
              class="org.moflon.tgg.mosl.builder.MOSLTGGNature">
        </run>
     </runtime>
     <builder
           id="org.moflon.tgg.mosl.mosltggbuilder">
     </builder>
  </extension>
  <extension
        point="org.eclipse.ui.commands">
     <category
           id="org.moflon.tgg.mosl.moslTGGNature.category"
           name="MOSL TGG Nature commands">
     </category>
     <command
           categoryId="org.moflon.tgg.mosl.moslTGGNature.category"
           defaultHandler="org.moflon.tgg.mosl.builder.AddRemoveMOSLTGGNatureHandler"
           id="org.moflon.tgg.mosl.addRemoveMOSLTGGNature"
           name="Add/RemoveMOSL TGG Nature">
     </command>
  </extension>
  <extension
        point="org.eclipse.ui.menus">
     <menuContribution
           locationURI="popup:org.eclipse.ui.projectConfigure?after=additions">
        <command
              commandId="org.moflon.tgg.mosl.addRemoveMOSLTGGNature"
              label="Disable MOSL TGG Builder"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <with
                    variable="selection">
                 <count
                       value="1">
                 </count>
                 <iterate>
                    <adapt
                          type="org.eclipse.core.resources.IProject">
                       <test
                             property="org.eclipse.core.resources.projectNature"
                             value="org.moflon.tgg.mosl.moslTGGNature">
                       </test>
                    </adapt>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
        <command
              commandId="org.moflon.tgg.mosl.addRemoveMOSLTGGNature"
              label="Enable MOSL TGG Builder"
              style="push">
           <visibleWhen
                 checkEnabled="false">
              <with
                    variable="selection">
                 <count
                       value="1">
                 </count>
                 <iterate>
                    <adapt
                          type="org.eclipse.core.resources.IProject">
                       <not>
                          <test
                                property="org.eclipse.core.resources.projectNature"
                                value="org.moflon.tgg.mosl.moslTGGNature">
                          </test>
                       </not>
                    </adapt>
                 </iterate>
              </with>
           </visibleWhen>
        </command>
     </menuContribution>
  </extension>



</plugin>
